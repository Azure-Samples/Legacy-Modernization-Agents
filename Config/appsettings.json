{
  "AISettings": {
    "_description": "Azure OpenAI configuration. This project uses TWO models: (1) Codex for code generation agents, (2) Chat for portal Q&A and reports.",
    "_modelArchitecture": "Codex models use Responses API, Chat models use Chat Completions API. See Agents/Infrastructure/ for implementations.",
    "ServiceType": "AzureOpenAI",
    
    "_codexSection": "=== CODEX MODEL (Responses API) - Used by all migration agents ===",
    "Endpoint": "https://g-openai.cognitiveservices.azure.com/",
    "ApiKey": "",
    "ModelId": "gpt-5.1-codex-mini",
    "DeploymentName": "gpt-5.1-codex-mini",
    "_perAgentModels": "Optional: Override model per agent (defaults to ModelId if not set)",
    "CobolAnalyzerModelId": "gpt-5.1-codex-mini",
    "JavaConverterModelId": "gpt-5.1-codex-mini",
    "UnitTestModelId": "gpt-5.1-codex-mini",
    "DependencyMapperModelId": "gpt-5.1-codex-mini",
    
    "_chatSection": "=== CHAT MODEL (Chat Completions API) - Used by portal and RE reports ===",
    "ChatEndpoint": "https://g-openai.cognitiveservices.azure.com/",
    "ChatApiKey": "",
    "ChatModelId": "gpt-5.2-chat",
    "ChatDeploymentName": "gpt-5.2-chat",
    
    "_authNote": "Leave ApiKey empty to use Azure AD/Entra ID authentication (DefaultAzureCredential)",
    
    "_tokenSettings": "=== Token limits ===",
    "MaxTokens": 16384,
    "_contextWindowNote": "Set ContextWindowSize to override model detection. e.g. 128000 for gpt-4o/gpt-5. If set, disables magic string checking.",
    "ContextWindowSize": null
  },
  "RateLimitSettings": {
    "_description": "Rate limiting to prevent Azure API throttling (429 errors).",
    "_howToSet": "TokensPerMinute should match your Azure OpenAI quota (Portal → Resource → Model deployments → TPM)",
    "TokensPerMinute": 300000,
    "MaxInputTokens": 10000,
    "MaxOutputTokens": 16384,
    "MaxRetries": 5,
    "_retryNote": "RetryDelayMs: Wait time after 429 error. MinDelayBetweenRequestsMs: Minimum gap between requests.",
    "RetryDelayMs": 65000,
    "MinDelayBetweenRequestsMs": 20000,
    "EnableAutoThrottle": true
  },
  "ApplicationSettings": {
    "_description": "General application paths and target language configuration",
    "CobolSourceFolder": "source",
    "JavaOutputFolder": "output/java",
    "CSharpOutputFolder": "output/csharp",
    "TestOutputFolder": "TestOutput",
    "TargetLanguage": "Java",
    "MigrationDatabasePath": "Data/migration.db",
    "Neo4j": {
      "_description": "Neo4j graph database for dependency visualization",
      "Enabled": true,
      "Uri": "bolt://localhost:7687",
      "Username": "neo4j",
      "Password": "cobol-migration-2025",
      "Database": "neo4j"
    }
  },
  "ChunkingSettings": {
    "_description": "Smart chunking for large COBOL files (>150K chars or >3K lines). Splits files into manageable pieces for LLM processing.",
    "_whenTriggered": "Files exceeding MaxLinesOfCode or 150K characters are automatically chunked.",
    "EnableChunking": true,
    "MaxLinesOfCode": 999999,
    "AutoChunkCharThreshold": 150000,
    "AutoChunkLineThreshold": 3000,
    "_chunkSizing": "=== Chunk size controls ===",
    "MaxTokensPerChunk": 28000,
    "MaxLinesPerChunk": 1500,
    "OverlapLines": 300,
    "MinSemanticUnitSize": 50,
    "_parallelProcessing": "=== Parallel processing (speed vs rate limits) ===",
    "EnableParallelProcessing": true,
    "MaxParallelChunks": 6,
    "MaxParallelAnalysis": 6,
    "MaxParallelConversion": 1,
    "ParallelStaggerDelayMs": 2000,
    "TokenBudgetPerMinute": 300000,
    "RateLimitSafetyFactor": 0.7,
    "_compression": "=== Context compression for later chunks ===",
    "EnableProgressiveCompression": true,
    "CompressionRatio": 0.3,
    "FullDetailChunkWindow": 3,
    "_resumability": "=== Resume interrupted processing ===",
    "EnableResumability": true
  },
  "ConversionSettings": {
    "_description": "Controls how COBOL names are converted to Java/C# names and code consistency.",
    "NamingStrategy": "Hybrid",
    "_namingOptions": "Hybrid=business-meaningful | PascalCase | camelCase | Preserve=keep COBOL names",
    "PreserveLegacyNamesAsComments": true,
    "GenerateMappingDocumentation": true,
    "_consistency": "=== Consistency enforcement ===",
    "EnforceDeterministicTypes": true,
    "AllowAIToSuggestModernPatterns": true,
    "EnableReconciliationPass": true,
    "MaxAutoFixAttempts": 3,
    "FailOnConsistencyViolation": false,
    "_classNaming": "=== Class name prefixes/suffixes (usually empty) ===",
    "ClassNamePrefix": "",
    "ClassNameSuffix": ""
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information"
    }
  },
  "ChatLogging": {
    "Enabled": true
  },
  "ApiCallLogging": {
    "Enabled": true
  },
  "AssemblySettings": {
    "_description": "File organization settings. SplitStrategy: SingleFile, ClassPerFile, FilePerChunk, LayeredArchitecture",
    "SplitStrategy": "ClassPerFile",
    "Java": {
      "_description": "Java/Quarkus output settings. Interface=CustomerService.java, Impl=CustomerServiceImpl.java",
      "PackagePrefix": "com.example.cobol",
      "GenerateInterfaces": true,
      "UseQuarkusAnnotations": true,
      "UseCDIAnnotations": true,
      "UseJakartaNamespace": true,
      "ClassFilePattern": "{ClassName}Impl.java",
      "InterfaceFilePattern": "{ClassName}.java",
      "GenerateRestEndpoints": false,
      "RestPathPrefix": "/api/v1"
    },
    "CSharp": {
      "_description": "C#/.NET output settings. Interface=ICustomerService.cs, Impl=CustomerService.cs",
      "NamespacePrefix": "CobolMigration",
      "UsePartialClasses": false,
      "UseNullableReferenceTypes": true,
      "UseFileScopedNamespaces": true,
      "ClassFilePattern": "{ClassName}.cs",
      "InterfaceFilePattern": "I{ClassName}.cs",
      "GenerateInterfaces": true,
      "UseDependencyInjection": true,
      "UseAsyncPatterns": true
    },
    "Layers": {
      "_description": "Layer settings for LayeredArchitecture split strategy",
      "Service": {
        "Enabled": true,
        "FolderName": "Services",
        "ClassSuffix": "Service",
        "GenerateInterface": true
      },
      "Repository": {
        "Enabled": true,
        "FolderName": "Repositories",
        "ClassSuffix": "Repository",
        "GenerateInterface": true
      },
      "Model": {
        "Enabled": true,
        "FolderName": "Models",
        "ClassSuffix": "",
        "GenerateInterface": false
      },
      "Utils": {
        "Enabled": true,
        "FolderName": "Utils",
        "ClassSuffix": "Helper",
        "GenerateInterface": false
      }
    }
  },
  "CodexProfile": {
    "_description": "Model profile for Codex/Responses API models (gpt-5.1-codex-mini). Controls three-tier content-aware reasoning.",
    "LowReasoningEffort": "low",
    "MediumReasoningEffort": "medium",
    "HighReasoningEffort": "high",
    "MediumThreshold": 5,
    "HighThreshold": 15,
    "LowMultiplier": 1.5,
    "MediumMultiplier": 2.5,
    "HighMultiplier": 3.5,
    "MinOutputTokens": 32768,
    "MaxOutputTokens": 100000,
    "TimeoutSeconds": 900,
    "TokensPerMinute": 500000,
    "RequestsPerMinute": 1000,
    "PicDensityFloor": 0.25,
    "LevelDensityFloor": 0.30,
    "EnableAmplifiers": true,
    "CopyNearStorageBonus": 3,
    "ExecSqlDliBonus": 4,
    "ReasoningExhaustionMaxRetries": 2,
    "ReasoningExhaustionRetryMultiplier": 2.0,
    "ComplexityIndicators": [
      { "Pattern": "EXEC\\s+SQL", "Weight": 3 },
      { "Pattern": "EXEC\\s+CICS", "Weight": 4 },
      { "Pattern": "EXEC\\s+DLI", "Weight": 4 },
      { "Pattern": "PERFORM\\s+VARYING", "Weight": 2 },
      { "Pattern": "PERFORM\\s+UNTIL", "Weight": 1 },
      { "Pattern": "EVALUATE\\s+TRUE", "Weight": 2 },
      { "Pattern": "SEARCH\\s+ALL", "Weight": 2 },
      { "Pattern": "REDEFINES", "Weight": 2 },
      { "Pattern": "OCCURS\\s+\\d+.*DEPENDING", "Weight": 3 },
      { "Pattern": "OCCURS\\s+\\d+", "Weight": 1 },
      { "Pattern": "COMPUTE\\b", "Weight": 1 },
      { "Pattern": "INSPECT\\b", "Weight": 1 },
      { "Pattern": "STRING\\b", "Weight": 1 },
      { "Pattern": "UNSTRING\\b", "Weight": 2 },
      { "Pattern": "CALL\\s+'[^']+'", "Weight": 2 },
      { "Pattern": "ALTER\\b", "Weight": 3 },
      { "Pattern": "GO\\s+TO\\s+DEPENDING", "Weight": 3 },
      { "Pattern": "COPY\\b", "Weight": 1 },
      { "Pattern": "REPLACE\\b", "Weight": 2 }
    ]
  },
  "ChatProfile": {
    "_description": "Model profile for Chat Completions API models (gpt-5.2-chat). Chat doesn't support 'low' reasoning.",
    "LowReasoningEffort": "medium",
    "MediumReasoningEffort": "medium",
    "HighReasoningEffort": "high",
    "MediumThreshold": 5,
    "HighThreshold": 15,
    "LowMultiplier": 1.5,
    "MediumMultiplier": 2.0,
    "HighMultiplier": 2.5,
    "MinOutputTokens": 16384,
    "MaxOutputTokens": 65536,
    "TimeoutSeconds": 600,
    "TokensPerMinute": 300000,
    "RequestsPerMinute": 1000,
    "PicDensityFloor": 0.25,
    "LevelDensityFloor": 0.30,
    "EnableAmplifiers": false,
    "CopyNearStorageBonus": 0,
    "ExecSqlDliBonus": 0,
    "ReasoningExhaustionMaxRetries": 1,
    "ReasoningExhaustionRetryMultiplier": 1.5,
    "ComplexityIndicators": []
  }
}
