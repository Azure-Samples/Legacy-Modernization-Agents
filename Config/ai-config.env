# =============================================================================
# Azure OpenAI Configuration (Optimized)
# =============================================================================
# INSTRUCTIONS:
# 1. Edit the "MASTER CONFIGURATION" section below with your details.
# 2. The "SYSTEM MAPPING" section automatically applies these to all tools.
# =============================================================================

# =============================================================================
# 1. MASTER CONFIGURATION (Edit these values)
# =============================================================================

# Service Credentials
_MAIN_ENDPOINT="https://your-endpoint.cognitiveservices.azure.com"
_MAIN_API_KEY="key-placeholder"
# NOTE: Leave _MAIN_API_KEY empty (or as placeholder) to use Azure AD / Entra ID
#       authentication via 'az login'. See azlogin-auth-guide.md for details.

# Model Selection
# Chat Model: Used for Portal Q&A, Reports, and Reasoning
_CHAT_MODEL="gpt-5.2-chat"

# Code Model: Used for COBOL Analysis, Java Conversion, and Unit Tests
# Recommended: gpt-4o, gpt-4-turbo, or codex-specific models
_CODE_MODEL="gpt-5.1-codex-mini"

# =============================================================================
# 2. SYSTEM MAPPING (Advanced - Do not edit unless necessary)
# =============================================================================

# --- Azure OpenAI Service Configuration ---
AZURE_OPENAI_SERVICE_TYPE="AzureOpenAI"
AZURE_OPENAI_ENDPOINT="$_MAIN_ENDPOINT"
AZURE_OPENAI_API_KEY="$_MAIN_API_KEY"
AZURE_OPENAI_MAX_TOKENS="16384"
AZURE_OPENAI_TEMPERATURE="0.1"

# --- Primary Deployment (Code Agents via Responses API) ---
# NOTE (Breaking Change):
#   In earlier versions, AZURE_OPENAI_DEPLOYMENT_NAME pointed to the chat model
#   (legacy / doctor checks). It now intentionally points to the CODE model
#   used by Code Agents via the Responses API.
#   If you have existing tooling or scripts that relied on
#   AZURE_OPENAI_DEPLOYMENT_NAME for chat behavior, update them to use:
#     - AZURE_OPENAI_CHAT_DEPLOYMENT_NAME
#     - AZURE_OPENAI_CHAT_MODEL_ID
#   to preserve the previous chat-focused behavior.
AZURE_OPENAI_DEPLOYMENT_NAME="$_CODE_MODEL"
AZURE_OPENAI_MODEL_ID="$_CODE_MODEL"

# --- Chat Deployment (Portal & Reports via Chat Completions API) ---
AZURE_OPENAI_CHAT_DEPLOYMENT_NAME="$_CHAT_MODEL"
AZURE_OPENAI_CHAT_MODEL_ID="$_CHAT_MODEL"

# --- Specialized Agent Models (Mapped to Code Model) ---
AZURE_OPENAI_COBOL_ANALYZER_MODEL="$_CODE_MODEL"
AZURE_OPENAI_JAVA_CONVERTER_MODEL="$_CODE_MODEL"
AZURE_OPENAI_DEPENDENCY_MAPPER_MODEL="$_CODE_MODEL"
AZURE_OPENAI_UNIT_TEST_MODEL="$_CODE_MODEL"

# --- Portal & Reporting Configuration (Mapped to Chat Model) ---
AISETTINGS__CHATENDPOINT="$_MAIN_ENDPOINT"
AISETTINGS__CHATAPIKEY="$_MAIN_API_KEY"
AISETTINGS__CHATMODELID="$_CHAT_MODEL"
AISETTINGS__CHATDEPLOYMENTNAME="$_CHAT_MODEL"

# --- Code Agents Configuration (Mapped to Code Model) ---
AISETTINGS__ENDPOINT="$_MAIN_ENDPOINT"
AISETTINGS__APIKEY="$_MAIN_API_KEY"
AISETTINGS__MODELID="$_CODE_MODEL"
AISETTINGS__DEPLOYMENTNAME="$_CODE_MODEL"

# Individual Agent Overrides (defaults to Code Model)
AISETTINGS__COBOLANALYZERMODELID="$_CODE_MODEL"
AISETTINGS__JAVACONVERTERMODELID="$_CODE_MODEL"
AISETTINGS__UNITTESTMODELID="$_CODE_MODEL"
AISETTINGS__DEPENDENCYMAPPERMODELID="$_CODE_MODEL"

# =============================================================================
# 3. APPLICATION SETTINGS
# =============================================================================
COBOL_SOURCE_FOLDER="source"
JAVA_OUTPUT_FOLDER="output/java"
CSHARP_OUTPUT_FOLDER="output/csharp"
TEST_OUTPUT_FOLDER="TestOutput"

# Logging
LOG_LEVEL="Information"
ENABLE_CHAT_LOGGING="true"
ENABLE_API_CALL_LOGGING="true"

# =============================================================================
# 4. MODEL PROFILE SETTINGS (Three-Tier Reasoning)
# =============================================================================
# Override CodexProfile or ChatProfile values from appsettings.json at runtime.
# All values are optional â€” defaults come from appsettings.json.

# --- Codex Profile (Responses API) ---
# CODEX_LOW_REASONING_EFFORT="low"
# CODEX_MEDIUM_REASONING_EFFORT="medium"
# CODEX_HIGH_REASONING_EFFORT="high"
# CODEX_MEDIUM_THRESHOLD="5"
# CODEX_HIGH_THRESHOLD="15"
# CODEX_LOW_MULTIPLIER="1.5"
# CODEX_MEDIUM_MULTIPLIER="2.5"
# CODEX_HIGH_MULTIPLIER="3.5"
# CODEX_MIN_OUTPUT_TOKENS="32768"
# CODEX_MAX_OUTPUT_TOKENS="100000"
# CODEX_TIMEOUT_SECONDS="900"
# CODEX_TOKENS_PER_MINUTE="500000"
# CODEX_REQUESTS_PER_MINUTE="1000"
# CODEX_PIC_DENSITY_FLOOR="0.25"
# CODEX_LEVEL_DENSITY_FLOOR="0.30"
# CODEX_ENABLE_AMPLIFIERS="true"
# CODEX_EXHAUSTION_MAX_RETRIES="2"
# CODEX_EXHAUSTION_RETRY_MULTIPLIER="2.0"

# --- Chat Profile (Chat Completions API) ---
# CHAT_TIMEOUT_SECONDS="600"
# CHAT_TOKENS_PER_MINUTE="300000"
# CHAT_MIN_OUTPUT_TOKENS="16384"
# CHAT_MAX_OUTPUT_TOKENS="65536"

# =============================================================================
# Security Notes:
# - Never commit real API keys.
# - Place sensitive values in Config/ai-config.local.env instead.
# - Consider using Azure Key Vault for production scenarios.
# =============================================================================
